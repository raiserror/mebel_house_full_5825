{% extends "base.html" %}
{% load static %}
{% block title %}Корзина{% endblock title %}

{% block style_css %}
<link rel="stylesheet" href="{% static 'deps/css/my_css.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
{% endblock style_css %}

{% block content %}
<!-- Контент на странице -->
<div class="row">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="bg-white p-4 mb-4 mx-2 rounded custom-shadow">
                <h3 class="text-center mb-4">Корзина</h3>
                <div class="container" id="cart-items-container">
                    {% include "carts/includes/included_cart.html" %}
                </div>
                
                {% if carts and not order %}
                <a class="btn btn-dark" href="{% url 'orders:create_order' %}">
                    Оформить заказ
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Обработчики для кнопок увеличения/уменьшения количества
    document.querySelectorAll('.decrement, .increment').forEach(button => {
        button.addEventListener('click', function() {
            const input = this.closest('.input-group').querySelector('input');
            let value = parseInt(input.value);
            
            if (this.classList.contains('decrement')) {
                if (value > 1) input.value = value - 1;
            } else {
                input.value = value + 1;
            }
            
        });
    });
</script>
{% endblock scripts %}